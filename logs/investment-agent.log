
> investment-agent@2.0.0 dev
> tsx watch src/index.ts

{"level":"WARN","timestamp":"2025-11-10T16:51:54.379Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2025-11-10T16:51:54.382Z] ========================================== 
[2025-11-10T16:51:54.383Z] üöÄ Starting Investment Agent v2.0 
[2025-11-10T16:51:54.383Z] ========================================== 
[2025-11-10T16:51:54.383Z] Connecting to PostgreSQL... 
[2025-11-10T16:51:54.431Z] Connecting to Kafka... 
(node:83378) TimeoutNegativeWarning: -1762793514447 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[2025-11-10T16:51:54.463Z] ‚úÖ Investment Agent ready 
[2025-11-10T16:51:54.463Z] Listening for investment tasks... 
[2025-11-10T16:51:54.463Z] ========================================== 
{"level":"INFO","timestamp":"2025-11-10T16:51:54.464Z","logger":"kafkajs","message":"[Consumer] Starting","groupId":"investment-agent-group"}
{"level":"INFO","timestamp":"2025-11-10T16:51:56.213Z","logger":"kafkajs","message":"[ConsumerGroup] Consumer has joined the group","groupId":"investment-agent-group","memberId":"investment-agent-899dad0f-377e-4535-8940-358f9a9437e7","leaderId":"investment-agent-899dad0f-377e-4535-8940-358f9a9437e7","isLeader":true,"memberAssignment":{"agent.tasks":[0,1,2],"execution.plans":[0,1,2]},"groupProtocol":"RoundRobinAssigner","duration":1748}
[2025-11-10T16:52:18.355Z] üì• Processing task {
  "taskId": "a3214206-d535-48b2-b2c9-94490e8c21f1",
  "action": "process_query",
  "agentType": "investment"
}
[2025-11-10T16:52:18.387Z] ‚ùå Error fetching MSE data {
  "error": "column c.industry does not exist"
}
[2025-11-10T16:52:19.302Z] ‚ùå Gemini API error {
  "error": "[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent: [429 Too Many Requests] Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
}
[2025-11-10T16:52:19.318Z] ‚úÖ Task completed {
  "taskId": "a3214206-d535-48b2-b2c9-94490e8c21f1",
  "duration": 963
}
12:55:01 AM [tsx] change in ./src/index.ts Restarting...
[2025-11-10T16:55:01.509Z] Shutting down... 
{"level":"INFO","timestamp":"2025-11-10T16:55:04.581Z","logger":"kafkajs","message":"[Runner] consumer not running, exiting","groupId":"investment-agent-group","memberId":"investment-agent-899dad0f-377e-4535-8940-358f9a9437e7"}
{"level":"INFO","timestamp":"2025-11-10T16:55:04.589Z","logger":"kafkajs","message":"[Consumer] Stopped","groupId":"investment-agent-group"}
12:55:06 AM [tsx] Process didn't exit in 5s. Force killing...
c{"level":"WARN","timestamp":"2025-11-10T16:55:07.033Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2025-11-10T16:55:07.036Z] ========================================== 
[2025-11-10T16:55:07.036Z] üöÄ Starting Investment Agent v2.0 
[2025-11-10T16:55:07.036Z] ========================================== 
[2025-11-10T16:55:07.036Z] Connecting to PostgreSQL... 
[2025-11-10T16:55:07.068Z] Connecting to Kafka... 
(node:84996) TimeoutNegativeWarning: -1762793707080 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[2025-11-10T16:55:07.092Z] ‚úÖ Investment Agent ready 
[2025-11-10T16:55:07.092Z] Listening for investment tasks... 
[2025-11-10T16:55:07.092Z] ========================================== 
{"level":"INFO","timestamp":"2025-11-10T16:55:07.093Z","logger":"kafkajs","message":"[Consumer] Starting","groupId":"investment-agent-group"}
{"level":"INFO","timestamp":"2025-11-10T16:55:10.128Z","logger":"kafkajs","message":"[ConsumerGroup] Consumer has joined the group","groupId":"investment-agent-group","memberId":"investment-agent-c1ef82c0-727c-4f91-b72a-aca5eabdc91e","leaderId":"investment-agent-c1ef82c0-727c-4f91-b72a-aca5eabdc91e","isLeader":true,"memberAssignment":{"agent.tasks":[0,1,2],"execution.plans":[0,1,2]},"groupProtocol":"RoundRobinAssigner","duration":3034}
