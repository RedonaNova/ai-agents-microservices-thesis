
> investment-agent@2.0.0 dev
> tsx watch src/index.ts

{"level":"WARN","timestamp":"2025-12-04T06:45:26.491Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2025-12-04T06:45:26.493Z] ========================================== 
[2025-12-04T06:45:26.493Z] ğŸš€ Starting Investment Agent v2.0 
[2025-12-04T06:45:26.493Z] ========================================== 
[2025-12-04T06:45:26.493Z] Connecting to PostgreSQL... 
[2025-12-04T06:45:26.517Z] Connecting to Kafka... 
(node:31008) TimeoutNegativeWarning: -1764830726526 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[2025-12-04T06:45:26.534Z] âœ… Investment Agent ready 
[2025-12-04T06:45:26.534Z] Listening for investment tasks... 
[2025-12-04T06:45:26.534Z] ========================================== 
{"level":"INFO","timestamp":"2025-12-04T06:45:26.534Z","logger":"kafkajs","message":"[Consumer] Starting","groupId":"investment-agent-group"}
{"level":"INFO","timestamp":"2025-12-04T06:45:29.565Z","logger":"kafkajs","message":"[ConsumerGroup] Consumer has joined the group","groupId":"investment-agent-group","memberId":"investment-agent-08be4815-7edf-43f5-85a9-ed7bac2f92c5","leaderId":"investment-agent-08be4815-7edf-43f5-85a9-ed7bac2f92c5","isLeader":true,"memberAssignment":{"agent.tasks":[0,1,2],"execution.plans":[0,1,2]},"groupProtocol":"RoundRobinAssigner","duration":3030}
[2025-12-04T06:45:58.727Z] ğŸ“¥ Processing task {
  "taskId": "42d3a6c1-7964-4776-bd73-ace1ef0910d3",
  "action": "process_query",
  "agentType": "investment"
}
[2025-12-04T06:45:58.728Z] ğŸ” Processing request {
  "action": "process_query",
  "symbols": [],
  "hasContext": true
}
[2025-12-04T06:45:58.755Z] ğŸ“Š Fetched MSE data {
  "count": 50,
  "symbols": []
}
[2025-12-04T06:46:11.371Z] âœ… Response saved to database {
  "requestId": "1983c567-826b-46fe-a378-d354f439991a"
}
[2025-12-04T06:46:11.372Z] âœ… Task completed {
  "taskId": "42d3a6c1-7964-4776-bd73-ace1ef0910d3",
  "duration": 12645
}
[2025-12-04T06:47:02.214Z] ğŸ“¥ Processing task {
  "taskId": "3c859f77-d1d9-4b67-8b89-6a863a58de1f",
  "action": "analyze_watchlist",
  "agentType": "investment"
}
[2025-12-04T06:47:02.214Z] ğŸ” Processing request {
  "action": "analyze_watchlist",
  "symbols": [
    "SUL-O-0000",
    "TEX-O-0000",
    "TTL-O-0000"
  ],
  "hasContext": true
}
[2025-12-04T06:47:02.245Z] âŒ Error fetching MSE data {
  "error": "missing FROM-clause entry for table \"th\""
}
[2025-12-04T06:47:11.447Z] âœ… Response saved to database {
  "requestId": "e14d552d-8960-445b-85a2-7c2d1c324794"
}
[2025-12-04T06:47:11.447Z] âœ… Task completed {
  "taskId": "3c859f77-d1d9-4b67-8b89-6a863a58de1f",
  "duration": 9233
}
