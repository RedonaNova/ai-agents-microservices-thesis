
> investment-agent@2.0.0 dev
> tsx watch src/index.ts

{"level":"WARN","timestamp":"2025-12-09T02:09:27.850Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2025-12-09T02:09:27.851Z] ========================================== 
[2025-12-09T02:09:27.851Z] ğŸš€ Starting Investment Agent v2.0 
[2025-12-09T02:09:27.851Z] ========================================== 
[2025-12-09T02:09:27.851Z] Connecting to PostgreSQL... 
[2025-12-09T02:09:27.873Z] Connecting to Kafka... 
(node:28315) TimeoutNegativeWarning: -1765246167883 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[2025-12-09T02:09:27.893Z] âœ… Investment Agent ready 
[2025-12-09T02:09:27.893Z] Listening for investment tasks... 
[2025-12-09T02:09:27.893Z] ========================================== 
{"level":"INFO","timestamp":"2025-12-09T02:09:27.894Z","logger":"kafkajs","message":"[Consumer] Starting","groupId":"investment-agent-group"}
{"level":"INFO","timestamp":"2025-12-09T02:09:30.922Z","logger":"kafkajs","message":"[ConsumerGroup] Consumer has joined the group","groupId":"investment-agent-group","memberId":"investment-agent-4e1e5476-ac95-4589-a9c2-d0f971e36454","leaderId":"investment-agent-4e1e5476-ac95-4589-a9c2-d0f971e36454","isLeader":true,"memberAssignment":{"agent.tasks":[0,1,2],"execution.plans":[0,1,2]},"groupProtocol":"RoundRobinAssigner","duration":3027}
[2025-12-09T02:12:09.323Z] ğŸ“¥ Processing task {
  "taskId": "9fd60a40-09f4-4f51-bce0-ee8db26866e2",
  "action": "analyze_watchlist",
  "agentType": "investment"
}
[2025-12-09T02:12:09.323Z] ğŸ” Processing request {
  "action": "analyze_watchlist",
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-09T02:12:09.324Z] ğŸ” Looking up MSE data for symbols {
  "symbolList": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T02:12:09.345Z] ğŸ“Š Fetched MSE data {
  "count": 2,
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T02:12:25.747Z] âœ… Response saved to database {
  "requestId": "baa156c3-22ea-40cd-b22d-b67ea1fcddbc"
}
[2025-12-09T02:12:25.747Z] âœ… Task completed {
  "taskId": "9fd60a40-09f4-4f51-bce0-ee8db26866e2",
  "duration": 16424
}
{"level":"WARN","timestamp":"2025-12-09T02:36:56.242Z","logger":"kafkajs","message":"[RequestQueue] Response without match","clientId":"investment-agent","broker":"localhost:9092","correlationId":64}
[2025-12-09T03:22:49.692Z] ğŸ“¥ Processing task {
  "taskId": "1dd0c9a7-0903-4bc6-a78b-2d8bff14335d",
  "action": "analyze_watchlist",
  "agentType": "investment"
}
[2025-12-09T03:22:49.693Z] ğŸ” Processing request {
  "action": "analyze_watchlist",
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-09T03:22:49.694Z] ğŸ” Looking up MSE data for symbols {
  "symbolList": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:22:49.733Z] ğŸ“Š Fetched MSE data {
  "count": 2,
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:23:03.679Z] âœ… Response saved to database {
  "requestId": "887ffbff-f9d3-49f0-bccb-9613c01617d8"
}
[2025-12-09T03:23:03.679Z] âœ… Task completed {
  "taskId": "1dd0c9a7-0903-4bc6-a78b-2d8bff14335d",
  "duration": 13987
}
[2025-12-09T03:23:23.969Z] ğŸ“¥ Processing task {
  "taskId": "b9584329-c597-462a-9ee0-103ed4f57316",
  "action": "analyze_portfolio",
  "agentType": "investment"
}
[2025-12-09T03:23:23.970Z] ğŸ” Processing request {
  "action": "analyze_portfolio",
  "symbols": [
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-09T03:23:23.970Z] ğŸ” Looking up MSE data for symbols {
  "symbolList": [
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:23:23.997Z] ğŸ“Š Fetched MSE data {
  "count": 1,
  "symbols": [
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:23:34.474Z] âœ… Response saved to database {
  "requestId": "716c796b-6447-4f85-a531-8fee587cc550"
}
[2025-12-09T03:23:34.474Z] âœ… Task completed {
  "taskId": "b9584329-c597-462a-9ee0-103ed4f57316",
  "duration": 10505
}
[2025-12-09T03:26:03.490Z] ğŸ“¥ Processing task {
  "taskId": "a8017e97-268b-4517-9f1e-ed81dddd7360",
  "action": "analyze_watchlist",
  "agentType": "investment"
}
[2025-12-09T03:26:03.490Z] ğŸ” Processing request {
  "action": "analyze_watchlist",
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-09T03:26:03.491Z] ğŸ” Looking up MSE data for symbols {
  "symbolList": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:26:03.519Z] ğŸ“Š Fetched MSE data {
  "count": 2,
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:26:18.168Z] âœ… Response saved to database {
  "requestId": "8426b9e1-62a4-4682-8def-9f4bb568357b"
}
[2025-12-09T03:26:18.168Z] âœ… Task completed {
  "taskId": "a8017e97-268b-4517-9f1e-ed81dddd7360",
  "duration": 14678
}
[2025-12-09T03:26:48.892Z] ğŸ“¥ Processing task {
  "taskId": "62bef6a9-a2d3-4a0b-a596-9ef2dffedb00",
  "action": "analyze_portfolio",
  "agentType": "investment"
}
[2025-12-09T03:26:48.893Z] ğŸ” Processing request {
  "action": "analyze_portfolio",
  "symbols": [
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-09T03:26:48.893Z] ğŸ” Looking up MSE data for symbols {
  "symbolList": [
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:26:48.926Z] ğŸ“Š Fetched MSE data {
  "count": 1,
  "symbols": [
    "KHAN-O-0000"
  ]
}
[2025-12-09T03:26:59.616Z] âœ… Response saved to database {
  "requestId": "f2ec044a-44f0-4e8e-ac18-080b339452ad"
}
[2025-12-09T03:26:59.617Z] âœ… Task completed {
  "taskId": "62bef6a9-a2d3-4a0b-a596-9ef2dffedb00",
  "duration": 10725
}
{"level":"WARN","timestamp":"2025-12-09T04:19:07.583Z","logger":"kafkajs","message":"[RequestQueue] Response without match","clientId":"investment-agent","broker":"localhost:9092","correlationId":962}
