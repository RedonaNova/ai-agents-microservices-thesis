
> investment-agent@2.0.0 dev
> tsx watch src/index.ts

{"level":"WARN","timestamp":"2025-12-08T14:54:31.380Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2025-12-08T14:54:31.382Z] ========================================== 
[2025-12-08T14:54:31.382Z] üöÄ Starting Investment Agent v2.0 
[2025-12-08T14:54:31.383Z] ========================================== 
[2025-12-08T14:54:31.383Z] Connecting to PostgreSQL... 
[2025-12-08T14:54:31.409Z] Connecting to Kafka... 
(node:26092) TimeoutNegativeWarning: -1765205671465 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[2025-12-08T14:54:31.481Z] ‚úÖ Investment Agent ready 
[2025-12-08T14:54:31.481Z] Listening for investment tasks... 
[2025-12-08T14:54:31.481Z] ========================================== 
{"level":"INFO","timestamp":"2025-12-08T14:54:31.482Z","logger":"kafkajs","message":"[Consumer] Starting","groupId":"investment-agent-group"}
{"level":"INFO","timestamp":"2025-12-08T14:54:34.581Z","logger":"kafkajs","message":"[ConsumerGroup] Consumer has joined the group","groupId":"investment-agent-group","memberId":"investment-agent-9720e834-7bd9-4b2b-9e69-630002cb094b","leaderId":"investment-agent-9720e834-7bd9-4b2b-9e69-630002cb094b","isLeader":true,"memberAssignment":{"agent.tasks":[0,1,2],"execution.plans":[0,1,2]},"groupProtocol":"RoundRobinAssigner","duration":3098}
[2025-12-08T15:29:51.539Z] üì• Processing task {
  "taskId": "c6f0ce2f-6d10-4a08-8fdb-04fa17d59261",
  "action": "analyze_portfolio",
  "agentType": "investment"
}
[2025-12-08T15:29:51.554Z] üîç Processing request {
  "action": "analyze_portfolio",
  "symbols": [
    "APU-O-0000"
  ],
  "hasContext": true
}
[2025-12-08T15:29:51.643Z] ‚ùå Error fetching MSE data {
  "error": "missing FROM-clause entry for table \"th\""
}
[2025-12-08T15:30:02.485Z] ‚úÖ Response saved to database {
  "requestId": "d2e7e090-cacc-4c8b-b60a-cbf2f7275383"
}
[2025-12-08T15:30:02.485Z] ‚úÖ Task completed {
  "taskId": "c6f0ce2f-6d10-4a08-8fdb-04fa17d59261",
  "duration": 10946
}
[2025-12-08T15:32:13.668Z] üì• Processing task {
  "taskId": "1ca5eb74-5560-4873-b755-a262482405ed",
  "action": "analyze_watchlist",
  "agentType": "investment"
}
[2025-12-08T15:32:13.668Z] üîç Processing request {
  "action": "analyze_watchlist",
  "symbols": [
    "APU-O-0000",
    "KHAN-O-0000"
  ],
  "hasContext": true
}
[2025-12-08T15:32:13.688Z] ‚ùå Error fetching MSE data {
  "error": "missing FROM-clause entry for table \"th\""
}
[2025-12-08T15:32:26.155Z] ‚úÖ Response saved to database {
  "requestId": "774edd11-52e5-4c45-aeca-aa808255821f"
}
[2025-12-08T15:32:26.155Z] ‚úÖ Task completed {
  "taskId": "1ca5eb74-5560-4873-b755-a262482405ed",
  "duration": 12487
}
