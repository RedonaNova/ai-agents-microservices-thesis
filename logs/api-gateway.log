
> api-gateway@1.0.0 dev
> tsx watch src/index.ts

[32minfo[39m: ‚úÖ Email service configured {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.212Z"}
[32minfo[39m: ‚úÖ Gemini AI configured for email generation {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.214Z"}
[32minfo[39m: Starting API Gateway... {"env":"development","port":3001,"service":"api-gateway","timestamp":"2025-12-04T13:14:37.237Z"}
[32minfo[39m: ‚úÖ PostgreSQL connected successfully {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.271Z"}
{"level":"WARN","timestamp":"2025-12-04T13:14:37.273Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
(node:20306) TimeoutNegativeWarning: -1764854077288 is a negative number.
Timeout duration was set to 1.
(Use `node --trace-warnings ...` to show where the warning was created)
[32minfo[39m: Kafka producer connected {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.289Z"}
[32minfo[39m: API Gateway listening on port 3001 {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.294Z"}
[32minfo[39m: CORS enabled for: http://localhost:3000 {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.294Z"}
[32minfo[39m: Kafka broker: localhost:9092 {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.294Z"}
[32minfo[39m: API Gateway is ready! {"service":"api-gateway","timestamp":"2025-12-04T13:14:37.294Z"}
[32minfo[39m: GET /health {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:14:40.492Z","userAgent":"curl/8.5.0"}
[32minfo[39m: POST /api/users/login {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:16:24.926Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/users/register {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:17:11.619Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.events {"key":"5","service":"api-gateway","timestamp":"2025-12-04T13:17:11.875Z"}
[32minfo[39m: Event sent to monitoring.events {"key":"api-gateway","service":"api-gateway","timestamp":"2025-12-04T13:17:11.940Z"}
[32minfo[39m: Email sent successfully {"service":"api-gateway","subject":"üéâ Redona-–¥ —Ç–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª!","timestamp":"2025-12-04T13:17:31.140Z","to":"radnaa2024@gmail.com"}
[32minfo[39m: ‚úÖ Welcome email sent {"service":"api-gateway","timestamp":"2025-12-04T13:17:31.141Z","to":"radnaa2024@gmail.com"}
[32minfo[39m: POST /api/daily-news/test {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:23:34.997Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Email sent successfully {"service":"api-gateway","subject":"üì∞ ”®–Ω”©”©–¥—Ä–∏–π–Ω –∑–∞—Ö –∑—ç—ç–ª–∏–π–Ω –º—ç–¥—ç—ç - Thursday, December 4, 2025","timestamp":"2025-12-04T13:24:23.397Z","to":"radnaa2024@gmail.com"}
[32minfo[39m: ‚úÖ News summary email sent {"articleCount":6,"service":"api-gateway","timestamp":"2025-12-04T13:24:23.400Z","to":"radnaa2024@gmail.com"}
[32minfo[39m: GET /api/agent/response/1983c567-826b-46fe-a378-d354f439991a {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:28:12.770Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: DELETE /api/watchlist/98f8856e-0faa-47ce-aa2a-9020b400178b/items/MSE {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:25.975Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/users/login {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:29.623Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/watchlist/98f8856e-0faa-47ce-aa2a-9020b400178b/items {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:31.854Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/users/login {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:35.313Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/users/login {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:38.636Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.events {"key":"5","service":"api-gateway","timestamp":"2025-12-04T13:29:38.843Z"}
[32minfo[39m: GET /api/watchlist/all/symbols {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:29:56.638Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/watchlist {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:30:00.799Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/watchlist {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:30:15.779Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.events {"key":"5","service":"api-gateway","timestamp":"2025-12-04T13:30:15.799Z"}
[32minfo[39m: POST /api/watchlist/2d16ee6a-2b5f-4c08-a5c4-0e67c28ccf1f/items {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:30:39.258Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.events {"key":"5","service":"api-gateway","timestamp":"2025-12-04T13:30:39.294Z"}
[32minfo[39m: POST /api/watchlist/2d16ee6a-2b5f-4c08-a5c4-0e67c28ccf1f/items {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:02.133Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.events {"key":"5","service":"api-gateway","timestamp":"2025-12-04T13:31:02.144Z"}
[32minfo[39m: GET /api/watchlist/all/symbols {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:08.647Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/agent/analyze-watchlist {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:13.177Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.requests {"key":"067fa9dc-2cca-4343-8878-8d5e9532065d","service":"api-gateway","timestamp":"2025-12-04T13:31:13.248Z"}
[32minfo[39m: Watchlist analysis request sent {"requestId":"067fa9dc-2cca-4343-8878-8d5e9532065d","service":"api-gateway","symbols":["APU-O-0000","KHAN-O-0000"],"timestamp":"2025-12-04T13:31:13.248Z","userId":"5"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:23.948Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:25.353Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:26.146Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:27.413Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:28.127Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:28.854Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:31:29.574Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/agent/response/067fa9dc-2cca-4343-8878-8d5e9532065d {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:32:09.160Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/agents {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:33:54.472Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:34:26.361Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/agents {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:35:08.199Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: POST /api/agent/query {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:14.349Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: Event sent to user.requests {"key":"e90f8172-592a-4022-8cc7-ea83ec31d48e","service":"api-gateway","timestamp":"2025-12-04T13:54:14.592Z"}
[32minfo[39m: User query sent to orchestrator {"requestId":"e90f8172-592a-4022-8cc7-ea83ec31d48e","service":"api-gateway","timestamp":"2025-12-04T13:54:14.593Z","userId":"5"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:17.935Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:19.003Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:19.730Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:20.410Z","userAgent":"PostmanRuntime/7.49.1"}
[32minfo[39m: GET /api/monitoring/metrics {"ip":"::1","service":"api-gateway","timestamp":"2025-12-04T13:54:21.038Z","userAgent":"PostmanRuntime/7.49.1"}
